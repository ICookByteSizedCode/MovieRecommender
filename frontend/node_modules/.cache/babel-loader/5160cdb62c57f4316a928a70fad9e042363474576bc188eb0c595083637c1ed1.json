{"ast":null,"code":"import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';import PasswordEmailValidation from'../PasswordEmailValidation';import emailjs from'@emailjs/browser';import Navbar from'../components/Navbar/Navbar.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UserRegister(){emailjs.init({publicKey:'TpP3AfQqh7okbmM0a'});const navigate=useNavigate();const[userInfo,setUserInfo]=useState({email:'',password:'',name:''});const[exceptions,setExceptions]=useState({});const handleInfo=event=>{setUserInfo(before=>({...before,[event.target.name]:event.target.value}));};const handleSubmit=event=>{event.preventDefault();const userError=PasswordEmailValidation(userInfo);setExceptions(userError);if(Object.keys(userError).length===0){var request=new Request('http://localhost:3001/api/newUser',{method:'POST',headers:new Headers({'Content-Type':'application/json'}),body:JSON.stringify(userInfo)});fetch(request).then(function(response){response.json().then(function(data){if(data.message===0){setExceptions({internal:\"internalError\"});}else if(data.message===1){setExceptions({emailInUse:\"emailInUse\"});}else{var request=new Request('http://localhost:3001/api/send-verification-email',{method:'POST',headers:new Headers({'Content-Type':'application/json'}),body:JSON.stringify({email:userInfo.email})});fetch(request).then(function(response){response.json().then(function(data){console.log(data.message);if(data.message===\"email send\"){const address=\"http://localhost:3000/verify-email/\"+data.token;emailjs.send(\"service_qzwhlos\",\"template_q7npdqh\",{message:address,from_email:\"stavaws@gmail.com\",to_email:userInfo.email}).then(()=>{console.log('SUCCESS!');},error=>{console.log('FAILED...',error.text);});navigate('/RegisteredSuccessfully');}});});}});});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center align-items-center vh-100\",style:{backgroundColor:\"#3E2751\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-3 rounded w-25\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Register\"}),/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 text-center\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Name\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"name\",name:\"name\",placeholder:\"Enter Your Name\",className:\"form-control rounded-0\",onChange:handleInfo}),exceptions.name&&/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"Not Valid Name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 text-center\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Email\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Enter Your Email\",className:\"form-control rounded-0\",onChange:handleInfo}),exceptions.email&&/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"Not Valid Email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 text-center\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Password\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Enter Your Password\",className:\"form-control rounded-0\",onChange:handleInfo}),exceptions.password&&/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"Password must contain at least one uppercase letter, one digit, one special character or underscore, and is at least 7 characters long\"}),exceptions.emailInUse&&/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"Email Already in use\"}),exceptions.internal&&/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"Internal Error\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success w-100\",children:\"Create Account\"})]})]})})]});}export default UserRegister;","map":{"version":3,"names":["React","useState","Link","useNavigate","PasswordEmailValidation","emailjs","Navbar","jsx","_jsx","jsxs","_jsxs","UserRegister","init","publicKey","navigate","userInfo","setUserInfo","email","password","name","exceptions","setExceptions","handleInfo","event","before","target","value","handleSubmit","preventDefault","userError","Object","keys","length","request","Request","method","headers","Headers","body","JSON","stringify","fetch","then","response","json","data","message","internal","emailInUse","console","log","address","token","send","from_email","to_email","error","text","children","className","style","backgroundColor","action","onSubmit","htmlFor","type","placeholder","onChange"],"sources":["/Users/stavkinreich/Desktop/Stav/CS520/COMPSCI520PROJECT3/frontend/src/pages/UserRegister.js"],"sourcesContent":["import React, {useState} from 'react';\nimport {Link, useNavigate} from 'react-router-dom';\nimport PasswordEmailValidation from '../PasswordEmailValidation';\nimport emailjs from '@emailjs/browser';\nimport Navbar from '../components/Navbar/Navbar.js'\n\nfunction UserRegister() {\n    emailjs.init({\n      publicKey: 'TpP3AfQqh7okbmM0a'\n     });\n    const navigate = useNavigate();\n    const [userInfo, setUserInfo] = useState({\n        email: '',\n        password: '',\n        name: ''\n    });\n    const [exceptions, setExceptions] = useState({});\n    const handleInfo = (event) => {\n        setUserInfo(before => ({...before, [event.target.name]: event.target.value}))\n    }\n    const handleSubmit= (event) => {\n        event.preventDefault();\n        const userError = PasswordEmailValidation(userInfo);\n        setExceptions(userError);\n        if(Object.keys(userError).length === 0) {\n            var request = new Request('http://localhost:3001/api/newUser', {\n                method: 'POST',\n                headers: new Headers({'Content-Type': 'application/json'}),\n                body: JSON.stringify(userInfo)\n            })\n            fetch(request)\n                .then(function(response) {\n                    response.json()\n                        .then(function(data) {\n                            if(data.message === 0) {\n                                setExceptions({internal: \"internalError\"});\n                            }\n                            else if(data.message === 1) {\n                                setExceptions({emailInUse: \"emailInUse\"});\n                            }\n                            else {\n                                var request = new Request('http://localhost:3001/api/send-verification-email', {\n                                                method: 'POST',\n                                                headers: new Headers({'Content-Type': 'application/json'}),\n                                                body: JSON.stringify({email: userInfo.email})\n                                            })\n                                            fetch(request)\n                                                .then(function(response) {\n                                                    response.json()\n                                                        .then(function(data) {\n                                                            console.log(data.message)\n                                                            if(data.message === \"email send\") {\n                                                                const address = \"http://localhost:3000/verify-email/\" + data.token;\n                                                                emailjs.send(\"service_qzwhlos\",\"template_q7npdqh\",{\n                                                                      message: address,\n                                                                      from_email: \"stavaws@gmail.com\",\n                                                                      to_email: userInfo.email\n                                                                      })\n                                                                      .then(\n                                                                        () => {\n                                                                          console.log('SUCCESS!');\n                                                                        },\n                                                                        (error) => {\n                                                                          console.log('FAILED...', error.text);\n                                                                        },\n                                                                      );\n                                                                navigate('/RegisteredSuccessfully')\n                                                            }\n                                                        })\n                                                })\n                            }\n                        })\n                })\n        }\n    }\n    return (\n    <div>\n        <Navbar />\n        <div className=\"d-flex justify-content-center align-items-center vh-100\" style={{backgroundColor: \"#3E2751\"}}>\n            <div className=\"bg-white p-3 rounded w-25\">\n            <h1 className=\"text-center\">Register</h1>\n                <form action=\"\" onSubmit={handleSubmit}>\n                    <div className=\"mb-3 text-center\">\n                        <label htmlFor=\"name\"><strong>Name</strong></label>\n                        <input type=\"name\" name=\"name\" placeholder=\"Enter Your Name\" className=\"form-control rounded-0\" onChange={handleInfo}/>\n                        {exceptions.name && <span className=\"text-danger\">Not Valid Name</span>}\n                    </div>\n                    <div className=\"mb-3 text-center\">\n                        <label htmlFor=\"email\"><strong>Email</strong></label>\n                        <input type=\"email\" name=\"email\" placeholder=\"Enter Your Email\" className=\"form-control rounded-0\" onChange={handleInfo}/>\n                        {exceptions.email && <span className=\"text-danger\">Not Valid Email</span>}\n                    </div>\n                    <div className=\"mb-3 text-center\">\n                        <label htmlFor=\"password\"><strong>Password</strong></label>\n                        <input type=\"password\" name=\"password\" placeholder=\"Enter Your Password\" className=\"form-control rounded-0\" onChange={handleInfo}/>\n                        {exceptions.password && <span className=\"text-danger\">Password must contain at least one uppercase letter, one digit, one special character or underscore,\n                        and is at least 7 characters long</span>}\n                        {exceptions.emailInUse && <span className=\"text-danger\">Email Already in use</span>}\n                        {exceptions.internal && <span className=\"text-danger\">Internal Error</span>}\n                    </div>\n                    <button className=\"btn btn-success w-100\">Create Account</button>\n                </form>\n            </div>\n        </div>\n    </div>\n    )\n}\n\nexport default UserRegister;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}