{"ast":null,"code":"import React,{useState}from'react';import MovieRecommender from'../components/MovieRecommender/MovieRecommender.js';import styles from'../components/MovieRecommender/MovieRecommender.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SearchMovie(_ref){let{genres,languages}=_ref;const[keyword,setKeyword]=useState('');const[searchedMovies,setSearchedMovies]=useState([]);const handleSearch=event=>{event.preventDefault();const options={method:'GET',headers:{accept:'application/json',Authorization:'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJkMWNkNGQxYmE3YTU4YjE1MTM4MzVkOTM1YjI2YjJiZSIsInN1YiI6IjY1ZTc4OWY5NTFmOTlhMDE2MmZiYjc1NCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.vnaq5VRSoFW0czZA-0ldClHBIEhL-PWg1P7NXFi6VeA'}};fetch('https://api.themoviedb.org/3/search/movie?include_adult=false&language=en-US&page=1&query='+keyword,options).then(response=>response.json()).then(response=>{let result=[];for(let i=0;i<response.results.length;i++){console.log(genres);console.log(languages);if(languages.length!==0&&!languages.includes(response.results[i][\"original_language\"])||genres.length!==0&&response.results[i][\"genre_ids\"].every(item=>!genres.some(elem=>elem[\"id\"]===item))){console.log(\"hit\");continue;}let curObj={id:i+1};curObj[\"posterUrl\"]=\"https://image.tmdb.org/t/p/original/\"+response.results[i][\"poster_path\"];curObj[\"title\"]=response.results[i][\"original_title\"];curObj[\"description\"]=response.results[i][\"overview\"];curObj[\"mov_id\"]=response.results[i][\"id\"];result.push(curObj);}setSearchedMovies(result);}).catch(err=>console.error(err));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.searchContainer,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:styles.searchInput,placeholder:\"Search for Movie\",value:keyword,onChange:e=>setKeyword(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:styles.searchButton,onClick:handleSearch,children:\"Search\"})]}),searchedMovies.length!==0?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(MovieRecommender,{movies:searchedMovies},new Date().getTime())}):null]});}export default SearchMovie;","map":{"version":3,"names":["React","useState","MovieRecommender","styles","jsx","_jsx","jsxs","_jsxs","SearchMovie","_ref","genres","languages","keyword","setKeyword","searchedMovies","setSearchedMovies","handleSearch","event","preventDefault","options","method","headers","accept","Authorization","fetch","then","response","json","result","i","results","length","console","log","includes","every","item","some","elem","curObj","id","push","catch","err","error","children","className","searchContainer","type","searchInput","placeholder","value","onChange","e","target","searchButton","onClick","movies","Date","getTime"],"sources":["/Users/stavkinreich/Desktop/Stav/CS520/COMPSCI520PROJECT3/frontend/src/pages/SearchMovie.js"],"sourcesContent":["import React, { useState } from 'react';\nimport MovieRecommender from '../components/MovieRecommender/MovieRecommender.js'\nimport styles from '../components/MovieRecommender/MovieRecommender.module.css';\n\nfunction SearchMovie({genres, languages}) {\n  const [keyword, setKeyword] = useState('');\n  const [searchedMovies, setSearchedMovies] = useState([])\n  const handleSearch = (event) => {\n    event.preventDefault();\n    const options = {\n      method: 'GET',\n      headers: {\n        accept: 'application/json',\n        Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJkMWNkNGQxYmE3YTU4YjE1MTM4MzVkOTM1YjI2YjJiZSIsInN1YiI6IjY1ZTc4OWY5NTFmOTlhMDE2MmZiYjc1NCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.vnaq5VRSoFW0czZA-0ldClHBIEhL-PWg1P7NXFi6VeA'\n      }\n    };\n\n    fetch('https://api.themoviedb.org/3/search/movie?include_adult=false&language=en-US&page=1&query=' + keyword, options)\n      .then(response => response.json())\n      .then(response => {\n        let result = [];\n        for(let i = 0; i < response.results.length; i++) {\n            console.log(genres);\n            console.log(languages);\n            if((languages.length !== 0 && !languages.includes(response.results[i][\"original_language\"])) || (genres.length !== 0 && response.results[i][\"genre_ids\"].every(item => !(genres.some(elem => elem[\"id\"] === item))))) {\n                console.log(\"hit\")\n                continue;\n            }\n            let curObj = {id: i + 1};\n            curObj[\"posterUrl\"] = \"https://image.tmdb.org/t/p/original/\" + response.results[i][\"poster_path\"];\n            curObj[\"title\"] = response.results[i][\"original_title\"];\n            curObj[\"description\"] = response.results[i][\"overview\"];\n            curObj[\"mov_id\"] = response.results[i][\"id\"]\n            result.push(curObj)\n        }\n        setSearchedMovies(result)\n      })\n      .catch(err => console.error(err));\n  };\n\n  return (\n  <div>\n  <div className={styles.searchContainer}>\n          <input\n            type=\"text\"\n            className={styles.searchInput}\n            placeholder=\"Search for Movie\"\n            value={keyword}\n            onChange={(e) => setKeyword(e.target.value)}\n          />\n          <button className={styles.searchButton} onClick={handleSearch}>\n            Search\n          </button>\n   </div>\n        {searchedMovies.length !== 0 ?\n              (<div>\n                <MovieRecommender\n                    key={new Date().getTime()}\n                    movies = {searchedMovies}\n                />\n              </div>) : null}\n  </div>\n  );\n}\n\nexport default SearchMovie;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}